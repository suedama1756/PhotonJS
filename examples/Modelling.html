---
layout: example
title: Modelling
script: Modelling.js
---
<span id="exampleSimple-description">
    The <span class="type">Model</span> type is a powerful base class for defining observable objects.
    <span class="type">Model</span> types can be defined by calling the
    <span class="type">photon.observable.Model.define</span> function passing in an object
    describing the members that make up the type. The example below defines a
    simple <span class="type">Point</span> type with two observable properties, x and y, whose values will be
    initialized to 0.
</span>
<span id="exampleAccessorFunctions-description">
    <h3>Accessor Functions</h3>
    By default Photon will generate property accessor functions for the defined properties. By ensuring
    that properties are manipulating through accessor functions the model can automatically perform
    common operations, such as change notification, validation, coercion, etc. When using accessor functions
    a property is read using <span class="expression">property()</span> and written using
    <span class="expression">property(value)</span>.
</span>
<span id="exampleAccessorProperties-description">
    <h3>Accessor Properties</h3>
    Modern browsers support the ability to define properties that are automatically mapped to accessor functions
    (sometimes called getters & setters). To enable this in Photon set <span class="expression">
    photon.observable.model.defaultPropertyMode</span> to <span class="expression">'property'</span> before
    defining your types.
    <p></p>
    WARNING: Be very sure when turning this feature on that you do not need to support older browsers (< IE9). Be
    aware that you cannot easily mix the two property styles, so turning the option off/on depending on browser
    will NOT work.
</span>
<span id="exampleOverridingInitialValues-description">
    <h3>Overriding Initial Values</h3>
    Initial values can be overridden when creating instances by supplying an
    <span class="expression">initialValues</span> parameter to the constructor (this feature can be disabled
    by using a custom constructor, see below for details).
</span>
<span id="exampleCoercers1-description">
    <h3>Coercion</h3>
    Property coercers provide a mechanism for ensuring a property value always meets our expectations. It can be used
    to ensure a property value is of a particular type, within a certain range, or is formatted correctly.
</span>
<div class="example" id="exampleCoercers1">
    Try typing in something that's not a number.
    <p></p>
    <label>X:</label>
    <input data-bind="value:x" >
    <label>Y:</label>
    <input data-bind="value:y">
    <hr>
    <span data-bind="text:$imports.photon.string.format('Point: {0},{1}', x(), y())"></span>
</div>
<div id="exampleChainingCoercers-description">
    <h3>Chaining Coercers</h3>
    Multiple coercers can be chained together.
</div>
<div class="example" id="exampleChainingCoercers">
    Text entered will be trimmed and converted to upper case.
    <p></p>
    <label>Name:</label>
    <input data-bind="value:name">
</div>
<div id="exampleSharedCoercers-description">
    <h3>Shared Coercers</h3>
    Coercers can also be shared for convenient re-use by attaching them to the
    <span class="class">photon.observable.model.coercers</span> extension point. Once
    attached they can be referenced by name.
</div>
<div class="example" id="exampleSharedCoercers">
    Text entered will be trimmed and converted to upper case.
    <p></p>
    <label>Name:</label>
    <input data-bind="value:name">
</div>
<div id="exampleChangeNotificationFunction-description">
    <h3>Change Notification</h3>
    To <strong>internally</strong> subscribe to changes in the model you can specify
    <span class="expression">beforeChange</span> and <span class="expression">afterChange</span>
    handlers (use <span class="expression">subscribe</span> for external subscriptions).
</div>
<div class="example" id="exampleChangeNotificationFunction">
    <label>Name:</label>
    <input data-bind="value:name">
    <span data-bind="text:lastChange()"></span>
</div>
<div id="exampleChangeNotificationFunctionName-description">
    <h3>Named Change Handlers</h3>
    If you want to share handlers, or just don't like the idea of setting handlers inline you can alternatively
    specify the name of the handler function to invoke.
</div>
<div class="example" id="exampleChangeNotificationFunctionName">
    <label>Name:</label>
    <input data-bind="value:name">
    <span data-bind="text:lastChange()"></span>
</div>